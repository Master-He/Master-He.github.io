问: 	从lambda 表达式引用的本地变量必须是最终变量或实际上的最终变量 ?

答： 加final，变量会存在堆中的方法区里，子线程共享进程的堆，所以能读到。否则是存在另一个线程的栈中，不同线程读不到

<img src="/Users/hwj/project/Master-He.github.io/docs/study/Java/待总结2.assets/image-20220305092838843.png" alt="image-20220305092838843" style="zoom:50%;" />

参考： https://www.tutorialspoint.com/final-local-variable-in-Java

<img src="/Users/hwj/project/Master-He.github.io/docs/study/Java/待总结2.assets/image-20220305093825568.png" alt="image-20220305093825568" style="zoom:50%;" />



## Local Variable

- Local variables are declared in methods, constructors, or blocks.
- Local variables are created when the method, constructor or block is entered and the variable will be destroyed once it exits the method, constructor, or block.
- Access modifiers cannot be used for local variables.
- Local variables are visible only within the declared method, constructor, or block.
- Local variables are implemented at stack level internally.
- There is no default value for local variables, so local variables should be declared and an initial value should be assigned before the first use.

## final Local Variable

- final is the only allowed access modifier for local variables.
- final local variable is not required to be initialized during declaration.
- final local variable allows compiler to generate an optimized code.
- final local variable can be used by anonymous inner class or in anonymous methods.

## Example

```java
abstract class AnonymousInner {
   public abstract void display();
}

public class Tester {
   public static void main(String args[]) {

      final int value;
      value = 100;
      AnonymousInner inner = new AnonymousInner() {
         public void display() {
            System.out.println("Accessing value: " + value); // Accessing value: 100
         }
      };
      inner.display();
   }
}
```