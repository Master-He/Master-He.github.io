# 引入

数据库的演化

```
单机

一主多从

多主多从 （一致性问题）

分表分库（业务层面上）

 	1. 水平拆分
 	2. 垂直拆分

针对TP,PB级别的数据，传统的mysql力不从心， 尤其是以数据分析这种典型的“全盘”扫描的统计业务
大规模扫盘已经让mysql不堪重负，为了解决这类问题，从数据应用场景角度分为OLTP,  OLAP
```





什么是OLTP

- 全称 OnLine Transaction Processing，联机事务处理系统,就是对数据的增删改查等操作
- 存储的是业务数据，来记录某类业务事件的发生，比如下单、支付、注册等等
- 典型代表有Mysql、 Oracle等数据库，对应的网站、系统应用后端数据库
- 针对事务进行操作，对响应时间要求高，面向前台应用的，应用比较简单，数据量相对较少，是GB级别的
- 面向群体:业务人员

当数据积累到一定的程度，需要对过去发生的事情做一个总结分析时，就需要把过去一段时间内产生的数据拿出来进行统计分析，从中获取想要的信息，为公司做决策提供支持，这个就是做OLAP了



什么是OLAP

- 全称OnLine Analytical Processing，联机分析处理系统
- 存储的是历史数据，对应的风控平台、BI平台、数据可视化
- OLAP是数据仓库系统的主要应用，支持复杂的分析操作，侧重决策，并且提供直观易懂的查询结果
- 典型代表有 Hive、ClickHouse
- 针对基于查询的分析系统，基础数据来源于生产系统中的操作数据，数据量非常大，常规是TB级别的
- 面向群体:分析决策人员





Clickhouse 等 OLAP 数据库通常用于回答诸如"昨天有多少人访问掘金？昨天有多少人访问 CSDN"之类的业务问题。如果使用传统的 OLTP 数据库来处理，可能需要几分钟甚至几个小时。而如果使用 OLAP 数据库，我们几毫秒就得到结果。OLTP 和 OLAP 之间的巨大速度差异是因为使用的底层存储结构不同，OLTP 数据库通常使用**行式存储**，OLAP 则通常使用**列式存储**。



为了进行多维分析 OLAP分为三类

- ROLAP， 关系型，数据没有进行预处理，效率非常低， 因为要进行全表扫描，全表扫描使用因为要检索很多字段，不可能每个字段都建立索引, 缺点效率非常低，优点是比较实时。
    - 代表有SparkSQL,  hive

- MOLAP， 预先进行聚合结果，以空间换时间，但是这样需要的空间太多，因为数据会跟着聚合字段（维度）的增加而爆炸性增长，缺点存储空间要很多， 且需要提前预处理。 优点是查询时速度比较快
    - 依托mapreduce， spark

- HOLAP， 混合ROLAP和MOLAP





到底为什么我们需要 Clickhouse?

参考文档： https://juejin.cn/post/7158458151786774559

为了兼顾ROLAP和MOLAP， 就引入了clickhouse ? 

他是列式存储的 OLAP 数据库， 目标是处理数万亿行的数据，并快速执行分析查询







